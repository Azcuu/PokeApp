<div class="auth">
  <h1>Registro</h1>

  <form (ngSubmit)="submit()" class="box">
    <label>Nombre de usuario</label>
    <input
      [(ngModel)]="username"
      name="username"
      placeholder="ej: pikachu123"
      required
      autocomplete="username"
    />

    <label>Email</label>
    <input
      [(ngModel)]="email"
      name="email"
      type="email"
      placeholder="ej: usuario@ejemplo.com"
      required
      autocomplete="email"
    />

    <label>ContraseÃ±a</label>
    <div class="password-container">
      <input
        [(ngModel)]="password"
        name="password"
        [type]="showPassword ? 'text' : 'password'"
        placeholder="mÃ­nimo 6 caracteres"
        required
        autocomplete="new-password"
        (input)="checkPasswordStrength()"
      />
      <button type="button" class="toggle-password" (click)="togglePassword()"
              [attr.aria-label]="showPassword ? 'Ocultar contraseÃ±a' : 'Mostrar contraseÃ±a'">
        <span class="eye-icon" [class.eye-open]="showPassword">ğŸ‘</span>
      </button>
    </div>

    <div class="password-strength" *ngIf="password">
      <div class="strength-bar">
        <div class="strength-fill" [style.width.%]="passwordStrength"
             [style.backgroundColor]="getStrengthColor()"></div>
      </div>
      <div class="strength-text">
        {{ getStrengthText() }}
      </div>
    </div>

    <label>Repite contraseÃ±a</label>
    <div class="password-container">
      <input
        [(ngModel)]="confirmPassword"
        name="confirmPassword"
        [type]="showConfirmPassword ? 'text' : 'password'"
        placeholder="repite la contraseÃ±a"
        required
        autocomplete="new-password"
      />
      <button type="button" class="toggle-password" (click)="toggleConfirmPassword()"
              [attr.aria-label]="showConfirmPassword ? 'Ocultar contraseÃ±a' : 'Mostrar contraseÃ±a'">
        <span class="eye-icon" [class.eye-open]="showConfirmPassword">ğŸ‘</span>
      </button>
    </div>

    <label class="terms">
      <input type="checkbox" [(ngModel)]="acceptTerms" name="acceptTerms" required>
      <span>
        Acepto los <a href="#" (click)="$event.preventDefault()">tÃ©rminos y condiciones</a>
      </span>
    </label>

    <button type="submit" [disabled]="loading || !acceptTerms" [class.loading]="loading">
      <span *ngIf="!loading">Registrarse</span>
      <span *ngIf="loading">Creando cuenta...</span>
    </button>

    <p class="error" *ngIf="error" role="alert">{{ error }}</p>
    <p class="success" *ngIf="successMessage" role="status">{{ successMessage }}</p>
  </form>

  <p class="hint">
    Â¿Ya tienes cuenta?
    <a routerLink="/login">Inicia sesiÃ³n aquÃ­</a>
  </p>
</div>
